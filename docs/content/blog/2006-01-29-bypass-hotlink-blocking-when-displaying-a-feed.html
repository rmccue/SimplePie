<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<title>SimplePie: Weblog &raquo; Bypass &#8220;hotlink blocking&#8221; when displaying a feed (Beta 1)</title>

<!-- META HTTP-EQUIV -->
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-us" />
<meta http-equiv="imagetoolbar" content="false" />

<!-- META NAME -->
<meta name="MSSmartTagsPreventParsing" content="true" />
<meta name="ROBOTS" content="ALL" />
<meta name="copyright" content="2004-2019 Ryan Parman, Geoffrey Sneddon" />
<meta name="description" content="A super-fast, easy-to-use, RSS and Atom parser written in PHP." />
<meta name="author" content="SimplePie.org" />
<meta name="rating" content="General" />
<meta name="revisit-after" content="2 Days" />
<meta name="doc-class" content="Living Document" />
<meta name="y_key" content="8a13570546b4e5cd" />

<!-- FAVICON -->
<link rel="shortcut icon" type="image/ico" href="/favicon.ico" />

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="WordPress 5.3-alpha-45317" /> <!-- leave this for stats please -->
<!-- STYLES -->
<link rel="stylesheet" href="/css/simplepie.css" media="screen, projector" />

<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/feed/" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://feeds.feedburner.com/simplepie" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://simplepie.org/blog/xmlrpc.php?rsd">
<link rel="pingback" href="http://simplepie.org/blog/xmlrpc.php" />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s.gravatar.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="SimplePie: Weblog &raquo; Bypass &#8220;hotlink blocking&#8221; when displaying a feed (Beta 1) Comments Feed" href="http://simplepie.org/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/simplepie.org\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.3-alpha-45317"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='http://simplepie.org/blog/wp-includes/css/dist/block-library/style.min.css?ver=5.3-alpha-45317' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widgets-css'  href='http://simplepie.org/blog/wp-content/plugins/jetpack/modules/widgets/widgets.css?ver=20121003' type='text/css' media='all' />
<script type='text/javascript' src='http://simplepie.org/blog/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://simplepie.org/blog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='http://simplepie.org/blog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://simplepie.org/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://simplepie.org/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='SimplePie 1.0 Beta now available!' href='http://simplepie.org/blog/2006/01/29/simplepie-10-beta-now-available/' />
<link rel='next' title='Display non-english feeds correctly (PR/Beta 1)' href='http://simplepie.org/blog/2006/01/29/display-non-english-feeds-correctly/' />
<meta name="generator" content="WordPress 5.3-alpha-45317" />
<link rel="canonical" href="http://simplepie.org/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/" />
<link rel='shortlink' href='http://wp.me/p2dmpt-p' />
<link rel="alternate" type="application/json+oembed" href="http://simplepie.org/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fsimplepie.org%2Fblog%2F2006%2F01%2F29%2Fbypass-hotlink-blocking-when-displaying-a-feed%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://simplepie.org/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fsimplepie.org%2Fblog%2F2006%2F01%2F29%2Fbypass-hotlink-blocking-when-displaying-a-feed%2F&#038;format=xml" />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Bypass &quot;hotlink blocking&quot; when displaying a feed (Beta 1)" />
<meta property="og:url" content="http://simplepie.org/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/" />
<meta property="og:description" content="Requirements: SimplePie 1.0 Beta 1 This tutorial has been superceded by a newer version. In my quest for making a feed parser that is intelligent, simple, and graceful, one thing that has always bu..." />
<meta property="og:site_name" content="SimplePie: Weblog" />
<!-- SCRIPTS -->
<script type="text/javascript" src="/mint/?js"></script>
<script type="text/javascript" src="/scripts/sleight.js"></script>
<script type="text/javascript" src="http://www.google-analytics.com/urchin.js"></script>

</head>

<body id="bodyblog">
<!-- end header -->

<div class="announcement"><a href="https://github.com/simplepie/simplepie/releases/tag/1.5">SimplePie 1.5 is now available!</a></div>
<div id="header">
	<div id="headerInner">
		<div id="logoContainer">
			<div id="logoContainerInner">
				<div id="logo"><a href="/"><img src="/images/logo_simplepie_horizontal.png" alt="SimplePie: PHP-based RSS and Atom feed handling" title="SimplePie: PHP-based RSS and Atom feed handling" border="0" /></a></div>
				<div id="feed"><form action="http://www.google.com/search" method="get"><input type="text" name="q" id="q" value="" class="text" /><input type="hidden" name="as_sitesearch" value="simplepie.org" />&nbsp;<input type="submit" value="Search" class="button" /></form></div>
				<div class="clearLeft"></div>
			</div>
		</div>
		<div id="menu">
		<table cellpadding="0" cellspacing="0" border="0"><tbody><tr><td>
<ul><li id="overview"><a href="/">Overview</a></li><li id="demo"><a href="/demo/">Demo</a></li><li id="blog"><a href="/blog/">Blog</a></li><li id="downloads"><a href="/downloads/">Download</a></li><li id="docs"><a href="/wiki/">Documentation</a></li><li id="api"><a href="/api/">API Docs</a></li><li id="support"><a href="/support/">Support</a></li><li id="bugs"><a href="http://github.com/simplepie/simplepie/issues">Issue Tracker</a></li><li id="faq"><a href="/wiki/faq/start">FAQ</a></li></ul>
			<div class="clearLeft"></div>
		</td></tr></tbody></table>
		</div>
	</div>
</div>

<div id="site">

	<div id="content">

		<div class="chunk">
			<h2 class="image"><img src="/images/copy_weblog.gif" alt="SimplePie Developer Weblog.  Not that we really have anything to say, but if you'll listen, why not?" title="SimplePie Developer Weblog.  Not that we really have anything to say, but if you'll listen, why not?" /></h2>
		</div>

		
		<div class="chunk" id="post-25">
			<h4 class="storytitle"><a href="http://simplepie.org/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/" rel="bookmark">Bypass &#8220;hotlink blocking&#8221; when displaying a feed (Beta 1)</a>&nbsp;<span class="footnote">29 Jan 2006&nbsp;</span></h4>
	
			<div class="storycontent">
				<p class="subscribe"><b>Requirements:</b> SimplePie 1.0 Beta 1</p>
<div class="chunk noborder">
<em>This tutorial has been superceded by <a href="/blog/2006/06/03/bypass-hotlink-blocking-when-displaying-a-feed-beta-2/">a newer version</a>.</em></p>
<p>In my quest for making a feed parser that is intelligent, simple, and graceful, one thing that has always bugged me about online feed readers is that some people disable the ability to hotlink images.</p>
<p>Now, I understand why they do this, because I do it too.  You don&#8217;t want a bunch of your bandwidth sucked up by people who are stealing your images for their own nefarious purposes (mwah-hah-hah!).  Rather, you&#8217;d prefer to keep the images for <em>your readers who are reading your content</em>.  Well, that&#8217;s exactly what a feed parser is for, right?</p>
<p>Desktop aggregators like <a href="http://www.feeddemon.com">Feed Demon</a> and <a href="http://ranchero.com/netnewswire/">NetNewsWire</a> are always able to just load up the images in context with the post that they&#8217;re reading, and it all makes sense.  The only reason why online feed readers have a problem is because the browsers that run them respect the hotlinking rules&mdash;even if the reasons don&#8217;t make sense for the context (like trying to apply laws about CD&#8217;s to MP3&#8217;s&mdash;although they&#8217;re related, they&#8217;re different, and the rules need to be modified for the new medium).</p>
<p>So, we&#8217;ve decided to solve the problem in our latest release.  Here&#8217;s how to bypass hotlink protection for feeds that you&#8217;re trying to read online.  We&#8217;ve added a new function called <code>display_image()</code> that will take the URL of the image and display it&mdash;blocked or not.</p>
<p>Here&#8217;s how it&#8217;s done.  First we want to take our page (I&#8217;ll be using the demo page that is included with the SimplePie download), and make a small modification to the head of the page.  We&#8217;re going to take the source code, and add the bolded part below:</p>
<pre>&lt;?php
// Start counting time for loading...
$starttime = explode(' ', microtime());
$starttime = $starttime[1] + $starttime[0];

include('simplepie.inc');

// Parse it
$feed = new SimplePie();
if (!empty($_GET['feed'])) {
	$feed-&gt;feed_url($_GET['feed']);
	$feed->init();
	if (!headers_sent() && $feed-&gt;get_encoding()) {
		header('Content-type: text/html; charset=' . $feed->get_encoding());
	}
}
<b>else if (!empty($_GET['i'])) {
	$feed->display_image($_GET['i']);
}</b>
?&gt;&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"&gt;
&lt;head&gt;
&lt;title>SimplePie: Demo</title&gt;
</pre>
<p>What did we just do?  We told the page that:</p>
<ol>
<li>If we're not passing the <code>feed</code> parameter to the page (like <code>index.php?feed=url_goes_here</code>), then check for the <code>i</code> parameter.  (I chose <code>i</code> because it's short for "image".  You can choose anything you want.)</li>
<li>If the <code>i</code> parameter exists, pass it to the <code>display_image()</code> function.</li>
</ol>
<p>The <code>display_image()</code> function is an exception to standard SimplePie processing in that it doesn't return any value.  It automatically <code>echo</code>'s the image content to the page.  So, if load up our page like <code>index.php?i=url_of_image</code>, we should see the image&mdash; and <i>only</i> the image&mdash;on the page.</p>
<p>Now, we just need to modify the value of all the <code>&lt;img src="" /&gt;</code> tags on the page, so that they all get passed through our new script.  Specifically, we're looking for all off-site images, not our own local ones, so let's make sure to target those.</p>
<p>The simplest way is with JavaScript, although you're free to use other languages if you prefer.  I wrote something that looks like this (I assumed an XHTML page, and I'm using an anonymous function):</p>
<pre>
&lt;script type="text/javascript"&gt;
//&lt;![CDATA[

(function(){

	// Get an array of all of the &lt;img&gt; tags in the page
	var img = document.getElementsByTagName('img');

	// Count how many there are, and store that number for faster processing
	var imgLength = img.length;

	// Loop through all of the images.  Unfortuately, JavaScript doesn't have a foreach() function.
	for (var x=0; x&lt;imgLength; x++) {

		// Check to make sure that the image we have is off-site
		if (img[x].src.substring(0,4) == 'http') {

			// Pass the URL as the value for the 'i' parameter.
			img[x].src = '?i=' + img[x].src;
		}
	}
})();

//]]&gt;
&lt;/script&gt;
</pre>
<p>If you place this script at the very bottom of your page, right above the closing <code>&lt;/body&gt;</code> tag, the script will re-write your external image URL's to have them pass through our function, and they'll all show up on your feed reader page, just like they do in the desktop aggregators.</p>
<p>Have fun!  This code has been implemented in the demo that comes with the <a href="/downloads/">SimplePie 1.0 Beta download</a>.
</div>
			</div>
	
			
			<p class="footnote">Posted by Ryan Parman at 11:46 pm.  <a href="http://simplepie.org/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/#respond">Comments (0)</a></p>
		</div>

		
		



	<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="http://simplepie.org/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="subscribe" style="margin:15px 0; border:0 solid #ccc; border-width:1px 0;">These comments are not monitored for questions.  For anything that requires a response, please use the <a href="http://tech.groups.yahoo.com/group/simplepie-support/">support forums</a> instead of these comments.</p><p class="comment-form-comment"><label for="comment" style="display: none">Comment</label><textarea id="comment" name="comment" cols="50" rows="10" aria-required="true" style="width:500px"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='25' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="07dc0e6c33" /></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments" style="display: inline;">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog" style="display: inline;">Notify me of new posts by email.</label></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="177"/></p>			</form>
			</div><!-- #respond -->
	</div>

		
		<div id="footer">
<p class="highlight" style="background-color:#ffc; border-bottom:1px solid #ccc;"><strong>Show some love!</strong> Wishlists for <a href="http://www.amazon.co.uk/gp/registry/wishlist/2ASV4RHBSM16H/026-9090951-0551667">Geoffrey</a>, <a href="http://www.amazon.com/gp/registry/wishlist/KAFYR57E8R81/">Ryan P.</a>, and <a href="http://www.amazon.com/gp/registry/wishlist/2P9RS76SG0UHL/">Ryan M.</a></p>
<p class="footnote">SimplePie is &copy; 2004&ndash;2019 <a href="http://ryanparman.com">Ryan Parman</a>, <a href="http://gsnedders.com/">Geoffrey Sneddon</a>, <a href="http://ryanmccue.info/">Ryan McCue</a> and contributors.  Licensed under the <a href="http://www.opensource.org/licenses/bsd-license.php">BSD License</a>.  Hosted thanks to <a href="http://ma.tt/">Matt Mullenweg</a>, powered by <a href="http://wordpress.org">WordPress 5.3-alpha-45317</a> and <a href="http://php.net">PHP 5.6.40</a>, and managed with <a href="http://basecamphq.com/?referrer=skyzyx">Basecamp</a>.  Syndication handled by <a href="http://simplepie.org" title="SimplePie 1.5">SimplePie</a>.  Variation on the Feed Icon by <a href="http://www.bartelme.at/journal/archive/feed_icon_template">Wolfgang Bartelme</a>.</p>
<div class="spacer"></div>
</div>
<script type="text/javascript">_uacct = "UA-1004552-1";urchinTracker();</script>
	</div>

</div>
	<div style="display:none">
	</div>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201920'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2019Mayaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://simplepie.org/blog/wp-content/plugins/jetpack/modules/wpgroho.js?ver=5.3-alpha-45317'></script>
<script type='text/javascript' src='http://simplepie.org/blog/wp-includes/js/wp-embed.min.js?ver=5.3-alpha-45317'></script>
<script async="async" type='text/javascript' src='http://simplepie.org/blog/wp-content/plugins/akismet/_inc/form.js?ver=4.1.2'></script>

	<script src="http://stats.wordpress.com/e-201920.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:2.2.7',blog:'32737083',post:'25',tz:'-8'});
	var load_cmc = function(){linktracker_init(32737083,25,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script></body>
</html>
<!-- Dynamic page generated in 0.654 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2019-05-16 05:07:09 -->
<!-- Compression = gzip -->