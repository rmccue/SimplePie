<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<title>SimplePie: Weblog &raquo; Display non-english feeds correctly (PR/Beta 1)</title>

<!-- META HTTP-EQUIV -->
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-us" />
<meta http-equiv="imagetoolbar" content="false" />

<!-- META NAME -->
<meta name="MSSmartTagsPreventParsing" content="true" />
<meta name="ROBOTS" content="ALL" />
<meta name="copyright" content="2004-2016 Ryan Parman, Geoffrey Sneddon" />
<meta name="description" content="A super-fast, easy-to-use, RSS and Atom parser written in PHP." />
<meta name="author" content="SimplePie.org" />
<meta name="rating" content="General" />
<meta name="revisit-after" content="2 Days" />
<meta name="doc-class" content="Living Document" />
<meta name="y_key" content="8a13570546b4e5cd" />

<!-- FAVICON -->
<link rel="shortcut icon" type="image/ico" href="/favicon.ico" />

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="WordPress 4.6-alpha-37738" /> <!-- leave this for stats please -->
<!-- STYLES -->
<link rel="stylesheet" href="/css/simplepie.css" media="screen, projector" />

<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/2006/01/29/display-non-english-feeds-correctly/feed/" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://feeds.feedburner.com/simplepie" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://simplepie.org/blog/xmlrpc.php?rsd">
<link rel="pingback" href="http://simplepie.org/blog/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="SimplePie: Weblog &raquo; Display non-english feeds correctly (PR/Beta 1) Comments Feed" href="http://simplepie.org/blog/2006/01/29/display-non-english-feeds-correctly/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/simplepie.org\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6-alpha-37738"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='jetpack-widgets-css'  href='http://simplepie.org/blog/wp-content/plugins/jetpack/modules/widgets/widgets.css?ver=20121003' type='text/css' media='all' />
<script type='text/javascript' src='http://simplepie.org/blog/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://simplepie.org/blog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='http://simplepie.org/blog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://simplepie.org/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://simplepie.org/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Bypass &#8220;hotlink blocking&#8221; when displaying a feed (Beta 1)' href='http://simplepie.org/blog/2006/01/29/bypass-hotlink-blocking-when-displaying-a-feed/' />
<link rel='next' title='SimplePie has a new license' href='http://simplepie.org/blog/2006/01/30/simplepie-has-a-new-license/' />
<meta name="generator" content="WordPress 4.6-alpha-37738" />
<link rel="canonical" href="http://simplepie.org/blog/2006/01/29/display-non-english-feeds-correctly/" />
<link rel='shortlink' href='http://wp.me/p2dmpt-o' />
<link rel="alternate" type="application/json+oembed" href="http://simplepie.org/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fsimplepie.org%2Fblog%2F2006%2F01%2F29%2Fdisplay-non-english-feeds-correctly%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://simplepie.org/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fsimplepie.org%2Fblog%2F2006%2F01%2F29%2Fdisplay-non-english-feeds-correctly%2F&#038;format=xml" />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Display non-english feeds correctly (PR/Beta 1)" />
<meta property="og:url" content="http://simplepie.org/blog/2006/01/29/display-non-english-feeds-correctly/" />
<meta property="og:description" content="Requirements: SimplePie 1.0 Preview Release (or newer) This tutorial has been superceded by a newer version. Have you ever had problems displaying feeds properly on your pages? I ran into an issue ..." />
<meta property="og:site_name" content="SimplePie: Weblog" />
<!-- SCRIPTS -->
<script type="text/javascript" src="/mint/?js"></script>
<script type="text/javascript" src="/scripts/sleight.js"></script>
<script type="text/javascript" src="http://www.google-analytics.com/urchin.js"></script>

</head>

<body id="bodyblog">
<!-- end header -->

<div class="announcement"><a href="http://simplepie.org/blog/2012/10/30/simplepie-1-3-1-is-now-available/">SimplePie 1.3.1 is now available</a>. <a href="http://simplepie.org/downloads/">Upgrade now!</a></div>
<div id="header">
	<div id="headerInner">
		<div id="logoContainer">
			<div id="logoContainerInner">
				<div id="logo"><a href="/"><img src="/images/logo_simplepie_horizontal.png" alt="SimplePie: PHP-based RSS and Atom feed handling" title="SimplePie: PHP-based RSS and Atom feed handling" border="0" /></a></div>
				<div id="feed"><form action="http://www.google.com/search" method="get"><input type="text" name="q" id="q" value="" class="text" /><input type="hidden" name="as_sitesearch" value="simplepie.org" />&nbsp;<input type="submit" value="Search" class="button" /></form></div>
				<div class="clearLeft"></div>
			</div>
		</div>
		<div id="menu">
		<table cellpadding="0" cellspacing="0" border="0"><tbody><tr><td>
<ul><li id="overview"><a href="/">Overview</a></li><li id="demo"><a href="/demo/">Demo</a></li><li id="blog"><a href="/blog/">Blog</a></li><li id="downloads"><a href="/downloads/">Download</a></li><li id="docs"><a href="/wiki/">Documentation</a></li><li id="api"><a href="/api/">API Docs</a></li><li id="support"><a href="/support/">Support</a></li><li id="bugs"><a href="http://github.com/simplepie/simplepie/issues">Issue Tracker</a></li><li id="faq"><a href="/wiki/faq/start">FAQ</a></li></ul>
			<div class="clearLeft"></div>
		</td></tr></tbody></table>
		</div>
	</div>
</div>

<div id="site">

	<div id="content">

		<div class="chunk">
			<h2 class="image"><img src="/images/copy_weblog.gif" alt="SimplePie Developer Weblog.  Not that we really have anything to say, but if you'll listen, why not?" title="SimplePie Developer Weblog.  Not that we really have anything to say, but if you'll listen, why not?" /></h2>
		</div>

		
		<div class="chunk" id="post-24">
			<h4 class="storytitle"><a href="http://simplepie.org/blog/2006/01/29/display-non-english-feeds-correctly/" rel="bookmark">Display non-english feeds correctly (PR/Beta 1)</a>&nbsp;<span class="footnote">29 Jan 2006&nbsp;</span></h4>
	
			<div class="storycontent">
				<p class="subscribe"><b>Requirements:</b> SimplePie 1.0 Preview Release (or newer)</p>
<div class="chunk noborder">
<em>This tutorial has been superceded by <a href="/blog/2006/06/03/display-non-english-feeds-correctly-beta-2/">a newer version</a>.</em></p>
<p>Have you ever had problems displaying feeds properly on your pages?  I ran into an issue a few times when I was trying to display an iTunes Music Store feed, and Beyonc&#0233; kept coming out as Beyonc[enter-garbled-text-here].  I soon realized that the problem occurred because my pages were being served as ISO-8859-1, and the iTMS feed was being sent as UTF-8.</p>
<p>The solution is really quite simple.</p>
<p>All you have to do is make sure that the page is being served and handled in the same character set that the feed is.  Fortunately, SimplePie has a built-in function that lets you determine what the feed is being served in: <code>get_encoding()</code>.</p>
<p>Ideally, when you&#8217;re loading a page with SimplePie in it, you&#8217;ll do that part at the very beginning of the page.  Doing so will help you serve the page correctly.</p>
<pre>
&lt;?php
// Start counting time for loading...
$starttime = explode(' ', microtime());
$starttime = $starttime[1] + $starttime[0];

include('../simplepie.inc');

// Parse it
$feed = new SimplePie();
if (!empty($_GET['feed'])) {
	$feed->feed_url($_GET['feed']);
	if (isset($_GET['xmldump'])) {
		$feed->enable_xmldump($_GET['xmldump']);
	}
	$feed->init();

<b>	// This is the part to pay attention to
	if (!headers_sent() && $feed->get_encoding()) {
		header('Content-type: text/html; charset=' . $feed->get_encoding());
	}</b>
}
?>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"&gt;
&lt;head&gt;
</pre>
<p>We specifically want to focus in on this chunk:</p>
<pre>
if (!headers_sent() && $feed->get_encoding()) {
	header('Content-type: text/html; charset=' . $feed->get_encoding());
}
</pre>
<p>The logic here is simple:</p>
<ol>
<li>As long as page headers haven&#8217;t been sent yet</li>
<li>And the feed encoding has been detected</li>
<li>Then add the encoding to the headers and send them to the browser</li>
</ol>
<p>Make sense?  Hopefully so, because it can&#8217;t get too much simpler. 🙂
</p></div>
<p>There&#8217;s another part of this that is also important: the <code>&lt;meta&gt;</code> tag.  All we have to do is make sure that the right encoding is set in the right meta tag.  Let&#8217;s take a look:</p>
<pre>
&lt;meta http-equiv="Content-Type" content="text/html;charset=<b>&lt;?php echo $feed->get_encoding(); ?&gt;</b>" /&gt;
</pre>
<p>Just make sure that this meta tag is included in your SimplePie-enabled pages, and your page will always be served with the correct character encoding for the page (as long as the character encoding is supported by SimplePie, and as of 1.0 Beta, a large number are).</p>
<p>If you&#8217;re loading a feed into a page dynamically (like in our <a href="/ideas/demo/delicious-ajax/">Delicious AJAX</a> demo), your best bet is to serve the page as UTF-8, since most languages are translated into UTF-8 inside SimplePie anyways.  &#8220;When in doubt, serve as UTF-8.&#8221;</p>
			</div>
	
			
			<p class="footnote">Posted by Ryan Parman at 11:46 pm.  <a href="http://simplepie.org/blog/2006/01/29/display-non-english-feeds-correctly/#respond">Comments (0)</a></p>
		</div>

		
		



				<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/2006/01/29/display-non-english-feeds-correctly/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="http://simplepie.org/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="subscribe" style="margin:15px 0; border:0 solid #ccc; border-width:1px 0;">These comments are not monitored for questions.  For anything that requires a response, please use the <a href="http://tech.groups.yahoo.com/group/simplepie-support/">support forums</a> instead of these comments.</p><p class="comment-form-comment"><label for="comment" style="display: none">Comment</label><textarea id="comment" name="comment" cols="50" rows="10" aria-required="true" style="width:500px"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='24' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="fa284e5145" /></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments" style="display: inline;">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog" style="display: inline;">Notify me of new posts by email.</label></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="61"/></p>				</form>
					</div><!-- #respond -->
		</div>

		
		<div id="footer">
<p class="highlight" style="background-color:#ffc; border-bottom:1px solid #ccc;"><strong>Show some love!</strong> Wishlists for <a href="http://www.amazon.co.uk/gp/registry/wishlist/2ASV4RHBSM16H/026-9090951-0551667">Geoffrey</a>, <a href="http://www.amazon.com/gp/registry/wishlist/KAFYR57E8R81/">Ryan P.</a>, and <a href="http://www.amazon.com/gp/registry/wishlist/2P9RS76SG0UHL/">Ryan M.</a></p>
<p class="footnote">SimplePie is &copy; 2004&ndash;2016 <a href="http://ryanparman.com">Ryan Parman</a>, <a href="http://gsnedders.com/">Geoffrey Sneddon</a>, <a href="http://ryanmccue.info/">Ryan McCue</a> and contributors.  Licensed under the <a href="http://www.opensource.org/licenses/bsd-license.php">BSD License</a>.  Hosted thanks to <a href="http://ma.tt/">Matt Mullenweg</a>, powered by <a href="http://wordpress.org">WordPress 4.6-alpha-37738</a> and <a href="http://php.net">PHP 5.5.32</a>, and managed with <a href="http://basecamphq.com/?referrer=skyzyx">Basecamp</a>.  Syndication handled by <a href="http://simplepie.org" title="SimplePie 1.2">SimplePie</a>.  Variation on the Feed Icon by <a href="http://www.bartelme.at/journal/archive/feed_icon_template">Wolfgang Bartelme</a>.</p>
<div class="spacer"></div>
</div>
<script type="text/javascript">_uacct = "UA-1004552-1";urchinTracker();</script>
	</div>

</div>
	<div style="display:none">
	</div>
<script type='text/javascript' src='http://simplepie.org/blog/wp-content/plugins/akismet/_inc/form.js?ver=3.1.11'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201624'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2016Junaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://simplepie.org/blog/wp-content/plugins/jetpack/modules/wpgroho.js?ver=4.6-alpha-37738'></script>
<script type='text/javascript' src='http://simplepie.org/blog/wp-includes/js/wp-embed.min.js?ver=4.6-alpha-37738'></script>

	<script src="http://stats.wordpress.com/e-201624.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:2.2.7',blog:'32737083',post:'24',tz:'-8'});
	var load_cmc = function(){linktracker_init(32737083,24,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script></body>
</html>
<!-- Dynamic page generated in 0.652 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-06-17 18:15:36 -->
<!-- Compression = gzip -->